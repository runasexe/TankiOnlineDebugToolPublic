((packageContext, connectContext) => {
(()=>{var t={312:t=>{t.exports={moduleListenerName:"tankiOnlineDebugModuleListener"}},784:(t,e,n)=>{t.exports=n(412).send()},412:(t,e,n)=>{const{moduleCreate:r}=n(262);t.exports=r("libHelper",((t,e)=>{t.units.register(n(865)),t.units.register(n(451)),t.units.register(n(629)),t.units.register(n(571))}))},451:t=>{class e{originalFunction=null;this=null;args=null;result=void 0;constructor(t,e,n){this.originalFunction=t,this.runtimeThis=e,this.args=n,this.result=void 0}callOriginal(){this.result=this.originalFunction.apply(this.this,this.args)}}t.exports={FunctionHook:e,FunctionHelper:class{static pathFunction(t,n,r){if(!(n in t)||"function"!=typeof t[n])return!1;const s=t[n];t[n]=function(...t){let n=new e(s,this,t);return r(n),n.result}}static pathFunctionSimpleBefore(t,e,n){if(!(e in t)||"function"!=typeof t[e])return!1;const r=t[e];t[e]=function(...t){return n.apply(this,t),r.apply(this,t)}}static pathFunctionSimpleAfter(t,e,n){if(!(e in t)||"function"!=typeof t[e])return!1;const r=t[e];t[e]=function(...t){let e=r.apply(this,t);return n.apply(this,t),e}}}}},571:(t,e,n)=>{const{domContext:r}=n(134);class s{static getRoot(t){const e=/^(?:[^\/]*:\/\/)?[^\/]+/.exec(t);return e?e[0]:t}static getBase(t){const e=/^[^?#]+\//.exec(t);return e?e[0]:t}static linkAbsolute(t,e){return t&&e?t.startsWith("//")?"https://"+t.slice(2):t.startsWith("/")?s.getRoot(e)+t:s.getBase(e)+t:null}static linkWithoutPage(t){let e=/^.*\//.exec(t);return e?e[0]:t}static getSearchInURL(t){if(!t)return null;const e=/\?([^#]*)/.exec(t);return e?e[1]:null}static getQueryVariable(t,e){let n=(s.getSearchInURL(e)||r.location.search).substring(1).split("&");for(let e=0;e<n.length;e++){let r=n[e].split("=");if(decodeURIComponent(r[0])==t)return decodeURIComponent(r[1])}return null}}t.exports={LinkHelper:s}},865:t=>{t.exports={ObjectHelper:class{static getPropertyName(t,e,n){const r=Object.getOwnPropertyNames(t).filter((t=>t.startsWith(e)));return n?r.length?r[0]:null:r}static getProperty(t,e,n){const r=Object.getOwnPropertyNames(t).filter((t=>t.startsWith(e))).map((e=>t[e]));return n?r.length?r[0]:null:r}}}},629:t=>{t.exports={FormatString:class{sourceString=null;constructor(t){this.sourceString=t||null}formatValuePython(t){return this.sourceString.replace(/{(\d+)}/g,((e,n)=>void 0!==t[n]?t[n]:e))}formatValue(t){return this.sourceString.replace(/%(\d+)/g,((e,n)=>void 0!==t[n]?t[n]:e))}toString(){return this.sourceString}}}},134:t=>{const e=()=>{try{return globalContext}catch(t){}return globalThis},n=()=>{try{return packageContext}catch(t){}return{}},r=()=>{try{return runtimeContext}catch(t){}return{}},s=t=>{try{return debugContext}catch(t){}return t?e():{}},i=()=>{try{return domContext}catch(t){}return e()},o=t=>{const s=r();if(t in s)return s[t];const i=n();if(t in i)return i[t];const o=e();return t in o?o[t]:t in globalThis?globalThis[t]:void 0};t.exports={forceDebugContext:s(!0),debugContext:s(!1),runtimeContext:r(),packageContext:n(),connectContext:(()=>{try{return connectContext}catch(t){}return e()})(),domContext:i(),globalContext:e(),consoleContext:o("console"),getDocument:()=>i().document,getValue:o,getInterpreterType:()=>globalThis.constructor&&globalThis.constructor.name&&"window"==globalThis.constructor.name.toLowerCase()||globalThis instanceof EventTarget||globalThis.navigator&&globalThis.navigator.userAgent||globalThis.navigator&&globalThis.navigator.cookieEnabled?"Browser":globalThis.performance&&globalThis.performance.nodeTiming?"NodeJS":"Unknown"}},262:function(t,e,n){const{connectContext:r}=n(134),{moduleListenerName:s}=n(312);class i extends Event{status=null;transferObject=null;constructor(t){super(t),this.status=!1,this.transferObject=null}}class o extends i{moduleTemplate=null;constructor(t,e){super(t),this.transferObject=this.moduleTemplate=e}}const l=(t,e,n)=>{t instanceof EventTarget?((t,e,n)=>{let r=new o(e,n);t.dispatchEvent(r);let s=r=>{let i=r.registerCallback||null;i&&"function"==typeof i&&(t.removeEventListener(e+"ModuleRequest",s),i(n))};r.status||t.addEventListener(e+"ModuleRequest",s)})(t,e,n):((t,e,n)=>{t[e]=t[e]||[],t[e]instanceof Array?t[e].push(n):t[e](n)})(t,e,n)};t.exports={moduleCreate:(t,...e)=>{let n={id:t,constructors:e,send:()=>(l(r,s,n),this)};return Object.defineProperty(n,"__dataType",{writable:!1,value:"ModuleTemplate"}),Object.defineProperty(n,"__isModuleTemplate",{writable:!1,value:!0}),n},defaultModuleCreateSignals:(t,e)=>{t.units.signal("init",e),t.units.signal("event",e),t.units.signal("load",e),t.units.signal("launch",e),t.units.signal("application",e),t.signals.register("init",(async(t,e)=>await Promise.all(t.units.signal("moduleInit",e)))),t.signals.register("event",(async(t,e)=>await Promise.all(t.units.signal("moduleEvent",e)))),t.signals.register("load",(async(t,e)=>await Promise.all(t.units.signal("moduleLoad",e)))),t.signals.register("launch",(async(t,e)=>await Promise.all(t.units.signal("moduleLaunch",e)))),t.signals.register("application",(async(t,e)=>await Promise.all(t.units.signal("moduleApplication",e))))}}}},e={};(function n(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports})(784)})();
(()=>{var e={312:e=>{e.exports={moduleListenerName:"tankiOnlineDebugModuleListener"}},303:(e,t,r)=>{e.exports=r(100).send()},100:(e,t,r)=>{const{moduleCreate:s}=r(262);e.exports=s("libWebpack",((e,t)=>{e.units.register(r(315)),e.units.register(r(828))}))},162:e=>{e.exports={WebpackModuleManager:class{installedModules=null;modules=null;constructor(e){this.modules=e||{},this.installedModules=[];const t=function(e){if(this.installedModules[e])return this.installedModules[e].exports;let r=this.installedModules[e]={i:e,l:!1,exports:{}};return this.modules[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}.bind(this);t.m=this.modules,t.c=this.installedModules,this.harmonyExport=this.export=t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;let s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(let r in e)t.d(s,r,function(t){return e[t]}.bind(null,r));return s},this.getDefaultExport=t.n=function(e){let r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.s=null,this.webpackRequire=this.__webpack_require__=t}installModule(e,t,r){if(this.modules[e]=t,r)return this.webpackRequire(e)}get __webpack_public_path__(){return this.__webpack_require__.p}set __webpack_public_path__(e){this.__webpack_require__.p=e}get publicPath(){return this.__webpack_require__.p}set publicPath(e){this.__webpack_require__.p=e}get __webpack_entry__(){return this.__webpack_require__.s}set __webpack_entry__(e){this.__webpack_require__.s=e}get entry(){return this.__webpack_require__.s}set entry(e){this.__webpack_require__.s=e}get entryModule(){return this.__webpack_require__.s}set entryModule(e){this.__webpack_require__.s=e}loadEntryModule(e){e&&(this.__webpack_require__.s=e),this.webpackRequire(this.__webpack_require__.s)}webpackRequireList(e){let t={};return e.map((e=>{t[e]=this.__webpack_require__(e)})),t}}}},828:(e,t,r)=>{const{WebpackModuleManager:s}=r(162);e.exports={AdvancedWebpackModuleManager:class extends s{getExports(e,t){const r=e.split(".").pop();this.webpackRequireList(this.searchMetadataClass(r));const s=this.searchExports(e,t);if(t)return s;const n=[];for(const e in s)n.push(s[e]);return n}searchMetadataClass(e,t){return this.searchSource('simpleName:"'+e+'"',t)}searchMetadataClassRegEx(e,t){return this.searchSourceRegEx(new RegExp('\\$metadata\\$={(?:kind:[^:]+,)?simpleName:"(?:'+(e||"[^{}]+")+')"(?:,interfaces:)?'),t)}searchSource(e,t){const r=[];for(const t in this.modules)-1!=this.modules[t].toString().indexOf(e)&&r.push(t);return t?r.shift():r}searchSourceRegEx(e,t){const r=[];for(const t in this.modules)e.test(this.modules[t].toString())&&r.push(t);return t?r.shift():r}searchExports(e,t){"string"==typeof e&&(e=e.split("."));let r={};const s=Array.from(e);let n=null;for(const e in this.installedModules)null!==this.installedModules[e].exports&&("object"!=typeof this.installedModules[e].exports&&"function"!=typeof this.installedModules[e].exports||(r[e]=this.installedModules[e].exports));for(;n=s.shift();){const e={};for(const t in r)Object.hasOwnProperty.call(r[t],n)&&null!==typeof r[t][n]&&("object"!=typeof r[t][n]&&"function"!=typeof r[t][n]||(e[t]=r[t][n]));r=e}if(t)for(const e in r)return r[e];return r}}}},315:e=>{e.exports={WebpackModuleManager:class{installedModules=null;modules=null;constructor(e){this.modules=e||{},this.installedModules=[];const t=function(e){if(this.installedModules[e])return this.installedModules[e].exports;let r=this.installedModules[e]={i:e,l:!1,exports:{}};return this.modules[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}.bind(this);t.m=this.modules,t.c=this.installedModules,this.harmonyExport=this.export=t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;let s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(let r in e)t.d(s,r,function(t){return e[t]}.bind(null,r));return s},this.getDefaultExport=t.n=function(e){let r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.s=null,this.webpackRequire=this.__webpack_require__=t}installModule(e,t,r){if(this.modules[e]=t,r)return this.webpackRequire(e)}get __webpack_public_path__(){return this.__webpack_require__.p}set __webpack_public_path__(e){this.__webpack_require__.p=e}get publicPath(){return this.__webpack_require__.p}set publicPath(e){this.__webpack_require__.p=e}get __webpack_entry__(){return this.__webpack_require__.s}set __webpack_entry__(e){this.__webpack_require__.s=e}get entry(){return this.__webpack_require__.s}set entry(e){this.__webpack_require__.s=e}get entryModule(){return this.__webpack_require__.s}set entryModule(e){this.__webpack_require__.s=e}loadEntryModule(e){e&&(this.__webpack_require__.s=e),this.webpackRequire(this.__webpack_require__.s)}webpackRequireList(e){let t={};return e.map((e=>{t[e]=this.__webpack_require__(e)})),t}}}},134:e=>{const t=()=>{try{return globalContext}catch(e){}return globalThis},r=()=>{try{return packageContext}catch(e){}return{}},s=()=>{try{return runtimeContext}catch(e){}return{}},n=e=>{try{return debugContext}catch(e){}return e?t():{}},i=()=>{try{return domContext}catch(e){}return t()},o=e=>{const n=s();if(e in n)return n[e];const i=r();if(e in i)return i[e];const o=t();return e in o?o[e]:e in globalThis?globalThis[e]:void 0};e.exports={forceDebugContext:n(!0),debugContext:n(!1),runtimeContext:s(),packageContext:r(),connectContext:(()=>{try{return connectContext}catch(e){}return t()})(),domContext:i(),globalContext:t(),consoleContext:o("console"),getDocument:()=>i().document,getValue:o,getInterpreterType:()=>globalThis.constructor&&globalThis.constructor.name&&"window"==globalThis.constructor.name.toLowerCase()||globalThis instanceof EventTarget||globalThis.navigator&&globalThis.navigator.userAgent||globalThis.navigator&&globalThis.navigator.cookieEnabled?"Browser":globalThis.performance&&globalThis.performance.nodeTiming?"NodeJS":"Unknown"}},262:function(e,t,r){const{connectContext:s}=r(134),{moduleListenerName:n}=r(312);class i extends Event{status=null;transferObject=null;constructor(e){super(e),this.status=!1,this.transferObject=null}}class o extends i{moduleTemplate=null;constructor(e,t){super(e),this.transferObject=this.moduleTemplate=t}}const l=(e,t,r)=>{e instanceof EventTarget?((e,t,r)=>{let s=new o(t,r);e.dispatchEvent(s);let n=s=>{let i=s.registerCallback||null;i&&"function"==typeof i&&(e.removeEventListener(t+"ModuleRequest",n),i(r))};s.status||e.addEventListener(t+"ModuleRequest",n)})(e,t,r):((e,t,r)=>{e[t]=e[t]||[],e[t]instanceof Array?e[t].push(r):e[t](r)})(e,t,r)};e.exports={moduleCreate:(e,...t)=>{let r={id:e,constructors:t,send:()=>(l(s,n,r),this)};return Object.defineProperty(r,"__dataType",{writable:!1,value:"ModuleTemplate"}),Object.defineProperty(r,"__isModuleTemplate",{writable:!1,value:!0}),r},defaultModuleCreateSignals:(e,t)=>{e.units.signal("init",t),e.units.signal("event",t),e.units.signal("load",t),e.units.signal("launch",t),e.units.signal("application",t),e.signals.register("init",(async(e,t)=>await Promise.all(e.units.signal("moduleInit",t)))),e.signals.register("event",(async(e,t)=>await Promise.all(e.units.signal("moduleEvent",t)))),e.signals.register("load",(async(e,t)=>await Promise.all(e.units.signal("moduleLoad",t)))),e.signals.register("launch",(async(e,t)=>await Promise.all(e.units.signal("moduleLaunch",t)))),e.signals.register("application",(async(e,t)=>await Promise.all(e.units.signal("moduleApplication",t))))}}}},t={};(function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,r),i.exports})(303)})();
(()=>{var e={312:e=>{e.exports={moduleListenerName:"tankiOnlineDebugModuleListener"}},127:(e,t,n)=>{e.exports=n(912).send()},912:(e,t,n)=>{const{moduleCreate:o,defaultModuleCreateSignals:a}=n(262);e.exports=o("tankionlineHooks",((e,t)=>{e.units.register(n(948)),e.units.register(n(231)),e.units.register(n(766))}),a)},948:e=>{e.exports={unitSignals:{init:(e,t)=>{e.hooks=[]},event:(e,t)=>{t.event.addEventListener("tankionlineLoader.entry.launch",(n=>{const o=t.modules.require("tankionlineWebpack").webpackData;for(const t in e.hooks){const n=e.hooks[t];n&&n.enabled&&n.callback&&n.callback(o,n)}}))}}}},766:e=>{const t={load:(e,t)=>{e.hooks.BattleMessagesHook={enabled:!0,callback:(e,n)=>{const o=t.modules.require("libHelper").FormatString,a=t.modules.require("libHelper").FunctionHelper,s=t.modules.require("libHelper").ObjectHelper,l={notifyFlagDropped:{playerMessage:new o("%0 потерял флаг"),defaultMessage:new o("Флаг потерян")},notifyFlagReturned:{playerMessage:new o("%0 возвратил флаг"),defaultMessage:new o("Флаг возвращен")}},r=e.getExports("tanks.client.battle.objects.modes.ctf.component.CaptureFlagComponent",!0),i=e.getExports("projects.tanks.multiplatform.battleservice.model.battle.team.BattleTeam",!0),c=e.getExports("tanks.client.lobby.redux.battle.hud.TeamRelation",!0),u=e.getExports("tanks.client.lobby.redux.battle.hud.BattleMessageType",!0),p=e.getExports("tanks.client.battle.hud.BattleMessagesComponent",!0),g=e.getExports("com.alternativaplatform.redux.react.LocalizedComponent",!0),d=p.prototype.getLocalizedKeyByBattleMessage_0;p.prototype.getLocalizedKeyByBattleMessage_0=function(e,...t){return e instanceof o?e:d.call(this,e,...t)};s.getPropertyName(g.prototype,"getText_").map((e=>{let t=g.prototype[e];g.prototype[e]=function(...e){return e.length&&e[0]instanceof o?e[0].formatValue(e.slice(1)):t.apply(this,e)}}));const m=s.getPropertyName(u.Companion.__proto__,"getType",!0);for(const e in l)a.pathFunctionSimpleBefore(r.prototype,s.getPropertyName(r.prototype,e,!0),(function(t,n){function o(e,t,n){return n==function(e,t){return e===t&&e!==i.NONE}(e,t)?c.ALLY:c.ENEMY}const a=(s=this.gameMode_0,r=t.teamType,p=!1,s&&s.possesedTankTeam?o(s.possesedTankTeam,r,p):null);var s,r,p;n?this.addBattleLogMessage_0(l[e].playerMessage,n,null!==a?u.Companion[m].call(u.Companion,a,!1):u.WHITE):this.addBattleLogMessage_1(l[e].defaultMessage,null!==a?u.Companion[m].call(u.Companion,a,!1):u.WHITE)}))}}}};e.exports={unitSignals:t}},231:e=>{e.exports={unitSignals:{load:(e,t)=>{e.hooks.FastOpenContainerHook={enabled:!0,callback:(e,t)=>{const n=e.getExports("tanks.clients.html5.lobby.containers.AnimationOpenContainerComponent",!0);t.onContainerAccelerateCalc=(...e)=>1,n.prototype.accelerate_0=(...e)=>t.onContainerAccelerateCalc.apply(null,e)}}}}}},134:e=>{const t=()=>{try{return globalContext}catch(e){}return globalThis},n=()=>{try{return packageContext}catch(e){}return{}},o=()=>{try{return runtimeContext}catch(e){}return{}},a=e=>{try{return debugContext}catch(e){}return e?t():{}},s=()=>{try{return domContext}catch(e){}return t()},l=e=>{const a=o();if(e in a)return a[e];const s=n();if(e in s)return s[e];const l=t();return e in l?l[e]:e in globalThis?globalThis[e]:void 0};e.exports={forceDebugContext:a(!0),debugContext:a(!1),runtimeContext:o(),packageContext:n(),connectContext:(()=>{try{return connectContext}catch(e){}return t()})(),domContext:s(),globalContext:t(),consoleContext:l("console"),getDocument:()=>s().document,getValue:l,getInterpreterType:()=>globalThis.constructor&&globalThis.constructor.name&&"window"==globalThis.constructor.name.toLowerCase()||globalThis instanceof EventTarget||globalThis.navigator&&globalThis.navigator.userAgent||globalThis.navigator&&globalThis.navigator.cookieEnabled?"Browser":globalThis.performance&&globalThis.performance.nodeTiming?"NodeJS":"Unknown"}},262:function(e,t,n){const{connectContext:o}=n(134),{moduleListenerName:a}=n(312);class s extends Event{status=null;transferObject=null;constructor(e){super(e),this.status=!1,this.transferObject=null}}class l extends s{moduleTemplate=null;constructor(e,t){super(e),this.transferObject=this.moduleTemplate=t}}const r=(e,t,n)=>{e instanceof EventTarget?((e,t,n)=>{let o=new l(t,n);e.dispatchEvent(o);let a=o=>{let s=o.registerCallback||null;s&&"function"==typeof s&&(e.removeEventListener(t+"ModuleRequest",a),s(n))};o.status||e.addEventListener(t+"ModuleRequest",a)})(e,t,n):((e,t,n)=>{e[t]=e[t]||[],e[t]instanceof Array?e[t].push(n):e[t](n)})(e,t,n)};e.exports={moduleCreate:(e,...t)=>{let n={id:e,constructors:t,send:()=>(r(o,a,n),this)};return Object.defineProperty(n,"__dataType",{writable:!1,value:"ModuleTemplate"}),Object.defineProperty(n,"__isModuleTemplate",{writable:!1,value:!0}),n},defaultModuleCreateSignals:(e,t)=>{e.units.signal("init",t),e.units.signal("event",t),e.units.signal("load",t),e.units.signal("launch",t),e.units.signal("application",t),e.signals.register("init",(async(e,t)=>await Promise.all(e.units.signal("moduleInit",t)))),e.signals.register("event",(async(e,t)=>await Promise.all(e.units.signal("moduleEvent",t)))),e.signals.register("load",(async(e,t)=>await Promise.all(e.units.signal("moduleLoad",t)))),e.signals.register("launch",(async(e,t)=>await Promise.all(e.units.signal("moduleLaunch",t)))),e.signals.register("application",(async(e,t)=>await Promise.all(e.units.signal("moduleApplication",t))))}}}},t={};(function n(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports})(127)})();
(()=>{var __webpack_modules__={312:e=>{e.exports={moduleListenerName:"tankiOnlineDebugModuleListener"}},900:(e,t,n)=>{const{domContext:a}=n(134),r="https://tankionline.com/play/";e.exports={paramOriginalScript:"forceScript",paramOriginalPage:"forcePage",mutatePage:(e,t)=>{let n;return(n=/^([^\/]+?:\/\/[^\/]+)\/hook(\/.*)$/.exec(t))?n[1]+n[2]:(n=/^([^\/]+?:\/\/[^\/]+\/.*\/)hook\/?$/.exec(t))?n[1]:e},mutateScript:(e,t,n)=>e,getGameInfo:()=>({linkGamePage:r,linkReferer:r}),getPageContentRewriteStatus:()=>!0,getBaseRewriteStatus:()=>!0}},110:(e,t,n)=>{e.exports=n(697).send()},697:(e,t,n)=>{const{moduleCreate:a,defaultModuleCreateSignals:r}=n(262);e.exports=a("tankionlineLoader",((e,t)=>{e.units.register(n(158)),e.units.register(n(9))}),r)},158:(module,__unused_webpack_exports,__webpack_require__)=>{const{getDocument}=__webpack_require__(134),{getPageContentRewriteStatus,getBaseRewriteStatus}=__webpack_require__(900),unitSignals={init:(e,t)=>{e.libHelper=null,e.webpackData=null,e.webpackSource=null},moduleLoad:async(e,t)=>{e.libHelper=t.modules.require("libHelper");let n=t.modules.require("tankionlineWebpack");e.webpackData=n.webpackData,e.webpackSource=n.webpackSource,await e.ScriptLoader.getMainScriptContentAuto(e.webpackSource,e.libHelper)},moduleApplication:(moduleContext,coreContext)=>{if(!moduleContext.webpackSource.mainScriptWebpackElements||!moduleContext.webpackSource.mainScriptWebpackPath||!moduleContext.webpackSource.mainScriptWebpackEntry)return void moduleContext.logger.error("Fail: webpackSource is corrupted: %O",moduleContext.webpackSource);const document=getDocument();if(getPageContentRewriteStatus()&&moduleContext.webpackSource.pageContent&&coreContext.event.dispatchEvent(new coreContext.ModuleEvent(moduleContext,"htmlRewrite.fullDocument",{cancelable:!0}))&&(document.firstChild.innerHTML=moduleContext.webpackSource.pageContent),getBaseRewriteStatus()&&moduleContext.webpackSource.linkBase&&coreContext.event.dispatchEvent(new coreContext.ModuleEvent(moduleContext,"htmlRewrite.headBase",{cancelable:!0}))){Array.from(document.getElementsByTagName("base")).map((e=>e.remove()));let e=document.head;if(!e){let t=document.getElementsByTagName("head");t.length?e=t[0]:moduleContext.logger.warn("DOM base element load error: document.head")}if(e){let t=document.createElement("base");t.setAttribute("href",moduleContext.webpackSource.linkBase),e.insertBefore(t,e.firstChild||null)}}if(coreContext.event.dispatchEvent(new coreContext.ModuleEvent(moduleContext,"dataLoad",{cancelable:!0}))&&(moduleContext.webpackData.modules=eval(moduleContext.webpackSource.mainScriptWebpackElements),moduleContext.webpackData.publicPath=moduleContext.webpackSource.mainScriptWebpackPath,moduleContext.webpackData.entryModule=moduleContext.webpackSource.mainScriptWebpackEntry),moduleContext.webpackData.modules){const e=moduleContext.webpackData.entryModule;if(coreContext.event.dispatchEvent(new coreContext.ModuleEvent(moduleContext,"dataLoaded",{cancelable:!1,detail:{webpackData:moduleContext.webpackData}})),coreContext.event.dispatchEvent(new coreContext.ModuleEvent(moduleContext,"entry.launch",{cancelable:!0,detail:{webpackData:moduleContext.webpackData}}))){const t=moduleContext.webpackData.loadEntryModule();coreContext.event.dispatchEvent(new coreContext.ModuleEvent(moduleContext,"entry.launched",{cancelable:!1,detail:{returnValue:t,isOriginalModule:e==moduleContext.webpackData.entryModule}}))}}}};module.exports={unitSignals}},9:(e,t,n)=>{const{paramOriginalScript:a,paramOriginalPage:r,mutatePage:o,mutateScript:l,getGameInfo:i}=n(900),{getDocument:c,domContext:s}=n(134);class u{static async getContent(e,t){let n=await fetch(e,{referrer:t,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"omit"});if(200!==n.status)return null;let a=await n.text();return a||null}}class p{libHelper=null;linkGamePage=null;linkReferer=null;constructor(e,t,n){this.libHelper=e,this.linkGamePage=t,this.linkReferer=n}getGamePage(){const e=this.libHelper.LinkHelper.getQueryVariable(r);return e||(this.linkGamePage?o(this.linkGamePage,s.location.href):null)}getGameScript(e){const t=this.libHelper.LinkHelper.getQueryVariable(a);return t||(e?l(e,this.getGamePage(),s.location.href):null)}getGameInfo(){return null}}class d extends p{getGameInfo(){const e=this.getGameScript();return e?{linkScript:this.libHelper.LinkHelper.linkAbsolute(e,this.getGamePage()),linkBase:this.libHelper.LinkHelper.getBase(this.getGamePage())}:null}}class m extends p{async getGameInfo(){const e=await u.getContent(this.getGamePage(),this.linkReferer);if(!e)return;const t=/<script[^>]+src="([^">]+main.[0-9a-f]{8}.js)"[^>]*><\/script>/i.exec(e);return t?{linkScript:this.getGameScript(this.libHelper.LinkHelper.linkAbsolute(t[1],this.getGamePage())),linkBase:this.libHelper.LinkHelper.getBase(this.getGamePage()),pageContent:e.replace(/<script[^>]+src="[^">]+"[^>]*><\/script>/i,"")}:null}}class g{static parseMainScript(e){if(!e)return null;let t=e.indexOf("}([function(t,e,n){")+2,n={mainScriptWebpackElements:e.substring(t,e.lastIndexOf("]")+1),mainScriptWebpackPath:null,mainScriptWebpackEntry:null};return e=e.substring(0,t),n.mainScriptWebpackPath=e.substring(e.lastIndexOf(',n.p="')+6,e.lastIndexOf('",n(n.s=')),n.mainScriptWebpackEntry=parseInt(e.substring(e.lastIndexOf('",n(n.s=')+8,e.lastIndexOf(")"))),n}static async getMainScriptContentAuto(e,t){const{linkGamePage:n,linkReferer:a}=i(),r=[new d(t,n,a),new m(t,n,a)];let o,l=null;for(let e=0;e<r.length;e++)if(o=r[e].getGameInfo(),o instanceof Promise&&(o=await o),o&&o.linkScript&&!o.scriptLoaded){l=o;break}if(!l)return;const c=g.parseMainScript(await u.getContent(l.linkScript,a));c&&Object.assign(l,c),Object.assign(e,l)}}e.exports={ScriptLoader:g}},134:e=>{const t=()=>{try{return globalContext}catch(e){}return globalThis},n=()=>{try{return packageContext}catch(e){}return{}},a=()=>{try{return runtimeContext}catch(e){}return{}},r=e=>{try{return debugContext}catch(e){}return e?t():{}},o=()=>{try{return domContext}catch(e){}return t()},l=e=>{const r=a();if(e in r)return r[e];const o=n();if(e in o)return o[e];const l=t();return e in l?l[e]:e in globalThis?globalThis[e]:void 0};e.exports={forceDebugContext:r(!0),debugContext:r(!1),runtimeContext:a(),packageContext:n(),connectContext:(()=>{try{return connectContext}catch(e){}return t()})(),domContext:o(),globalContext:t(),consoleContext:l("console"),getDocument:()=>o().document,getValue:l,getInterpreterType:()=>globalThis.constructor&&globalThis.constructor.name&&"window"==globalThis.constructor.name.toLowerCase()||globalThis instanceof EventTarget||globalThis.navigator&&globalThis.navigator.userAgent||globalThis.navigator&&globalThis.navigator.cookieEnabled?"Browser":globalThis.performance&&globalThis.performance.nodeTiming?"NodeJS":"Unknown"}},262:function(e,t,n){const{connectContext:a}=n(134),{moduleListenerName:r}=n(312);class o extends Event{status=null;transferObject=null;constructor(e){super(e),this.status=!1,this.transferObject=null}}class l extends o{moduleTemplate=null;constructor(e,t){super(e),this.transferObject=this.moduleTemplate=t}}const i=(e,t,n)=>{e instanceof EventTarget?((e,t,n)=>{let a=new l(t,n);e.dispatchEvent(a);let r=a=>{let o=a.registerCallback||null;o&&"function"==typeof o&&(e.removeEventListener(t+"ModuleRequest",r),o(n))};a.status||e.addEventListener(t+"ModuleRequest",r)})(e,t,n):((e,t,n)=>{e[t]=e[t]||[],e[t]instanceof Array?e[t].push(n):e[t](n)})(e,t,n)};e.exports={moduleCreate:(e,...t)=>{let n={id:e,constructors:t,send:()=>(i(a,r,n),this)};return Object.defineProperty(n,"__dataType",{writable:!1,value:"ModuleTemplate"}),Object.defineProperty(n,"__isModuleTemplate",{writable:!1,value:!0}),n},defaultModuleCreateSignals:(e,t)=>{e.units.signal("init",t),e.units.signal("event",t),e.units.signal("load",t),e.units.signal("launch",t),e.units.signal("application",t),e.signals.register("init",(async(e,t)=>await Promise.all(e.units.signal("moduleInit",t)))),e.signals.register("event",(async(e,t)=>await Promise.all(e.units.signal("moduleEvent",t)))),e.signals.register("load",(async(e,t)=>await Promise.all(e.units.signal("moduleLoad",t)))),e.signals.register("launch",(async(e,t)=>await Promise.all(e.units.signal("moduleLaunch",t)))),e.signals.register("application",(async(e,t)=>await Promise.all(e.units.signal("moduleApplication",t))))}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_exports__=__webpack_require__(110)})();
(()=>{var e={312:e=>{e.exports={moduleListenerName:"tankiOnlineDebugModuleListener"}},114:(e,t,n)=>{e.exports=n(301).send()},301:(e,t,n)=>{const{moduleCreate:a,defaultModuleCreateSignals:r}=n(262);e.exports=a("tankionlineWebpack",((e,t)=>{e.units.register(n(707))}),r)},707:e=>{e.exports={unitSignals:{moduleInit:(e,t)=>{let n=t.modules.require("libWebpack");e.webpackData=new n.AdvancedWebpackModuleManager,e.webpackSource={}}}}},134:e=>{const t=()=>{try{return globalContext}catch(e){}return globalThis},n=()=>{try{return packageContext}catch(e){}return{}},a=()=>{try{return runtimeContext}catch(e){}return{}},r=e=>{try{return debugContext}catch(e){}return e?t():{}},o=()=>{try{return domContext}catch(e){}return t()},s=e=>{const r=a();if(e in r)return r[e];const o=n();if(e in o)return o[e];const s=t();return e in s?s[e]:e in globalThis?globalThis[e]:void 0};e.exports={forceDebugContext:r(!0),debugContext:r(!1),runtimeContext:a(),packageContext:n(),connectContext:(()=>{try{return connectContext}catch(e){}return t()})(),domContext:o(),globalContext:t(),consoleContext:s("console"),getDocument:()=>o().document,getValue:s,getInterpreterType:()=>globalThis.constructor&&globalThis.constructor.name&&"window"==globalThis.constructor.name.toLowerCase()||globalThis instanceof EventTarget||globalThis.navigator&&globalThis.navigator.userAgent||globalThis.navigator&&globalThis.navigator.cookieEnabled?"Browser":globalThis.performance&&globalThis.performance.nodeTiming?"NodeJS":"Unknown"}},262:function(e,t,n){const{connectContext:a}=n(134),{moduleListenerName:r}=n(312);class o extends Event{status=null;transferObject=null;constructor(e){super(e),this.status=!1,this.transferObject=null}}class s extends o{moduleTemplate=null;constructor(e,t){super(e),this.transferObject=this.moduleTemplate=t}}const l=(e,t,n)=>{e instanceof EventTarget?((e,t,n)=>{let a=new s(t,n);e.dispatchEvent(a);let r=a=>{let o=a.registerCallback||null;o&&"function"==typeof o&&(e.removeEventListener(t+"ModuleRequest",r),o(n))};a.status||e.addEventListener(t+"ModuleRequest",r)})(e,t,n):((e,t,n)=>{e[t]=e[t]||[],e[t]instanceof Array?e[t].push(n):e[t](n)})(e,t,n)};e.exports={moduleCreate:(e,...t)=>{let n={id:e,constructors:t,send:()=>(l(a,r,n),this)};return Object.defineProperty(n,"__dataType",{writable:!1,value:"ModuleTemplate"}),Object.defineProperty(n,"__isModuleTemplate",{writable:!1,value:!0}),n},defaultModuleCreateSignals:(e,t)=>{e.units.signal("init",t),e.units.signal("event",t),e.units.signal("load",t),e.units.signal("launch",t),e.units.signal("application",t),e.signals.register("init",(async(e,t)=>await Promise.all(e.units.signal("moduleInit",t)))),e.signals.register("event",(async(e,t)=>await Promise.all(e.units.signal("moduleEvent",t)))),e.signals.register("load",(async(e,t)=>await Promise.all(e.units.signal("moduleLoad",t)))),e.signals.register("launch",(async(e,t)=>await Promise.all(e.units.signal("moduleLaunch",t)))),e.signals.register("application",(async(e,t)=>await Promise.all(e.units.signal("moduleApplication",t))))}}}},t={};(function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports})(114)})();
(()=>{var e={522:e=>{e.exports={debugName:"tankiOnlineDebug",styleLoggerProject:"color: blue;",styleLoggerModule:"color: green;"}},312:e=>{e.exports={moduleListenerName:"tankiOnlineDebugModuleListener"}},185:e=>{e.exports={projectName:"Tanki Online Debug"}},166:(e,t,n)=>{const{Module:l}=n(305);e.exports={moduleCreateCore:(...e)=>{const t=new l("core",{loaded:!0,info:{versionProduction:null,versionDevelopment:null}});return t.exports=t,Object.defineProperty(t,"__isCore",{writable:!1,value:!0}),Object.defineProperty(t,"__isModule",{writable:!1,value:!0}),Object.defineProperty(t,"__dataType",{writable:!1,value:"Module"}),e.map((e=>e.call(t,t,t))),t}}},725:(e,t,n)=>{const l=n(598);l.info.versionProduction=!0,e.exports=l},598:(e,t,n)=>{const{moduleCreateCore:l}=n(166),{defaultModuleCreateSignals:s}=n(262);e.exports=l((e=>{e.info.name="Tanki Online: Core",e.info.version="1.0.1",e.info.versionAlpha=!0,e.info.versionBeta=!1,e.units.register(n(38)),e.units.register(n(334)),e.units.register(n(305)),e.units.register(n(267)),e.units.register(n(453)),e.units.register(n(324)),e.units.register(n(446)),e.units.register(n(737))}),s)},324:(e,t,n)=>{const{getInterpreterType:l}=n(134),s={application:e=>{e.units.signal("application"+l()),e.units.destroy()},applicationUnknown:e=>{consoleContext.error("Can't actions to run: Unknown interpreter")}};e.exports={unitSignals:s}},446:(e,t,n)=>{const{globalContext:l}=n(134),{CoreEvent:s}=n(334);class i extends s{constructor(){super("moduleListenerStop",{cancelable:!0})}}i.eventType="core.moduleListenerStop";const o={applicationBrowser:e=>{e.units.signal("applicationPrev");const t=async()=>{await e.modules.signals.signalModulesLoad(e),e.event.dispatchEvent(new e.ModuleListenerStopEvent)&&e.moduleListener.listenStop(),e.units.signal("applicationPost")};l instanceof EventTarget?l.document&&l.document.readyState&&"complete"==l.document.readyState?t():l.addEventListener("load",t):t()}};e.exports={ModuleListenerStopEvent:i,unitSignals:o}},737:(e,t,n)=>{const{consoleContext:l}=n(134),s={applicationNodeJS:e=>{l.error("Can't actions to run in NodeJS")}};e.exports={unitSignals:s}},334:(e,t,n)=>{const{consoleContext:l}=n(134);class s extends EventTarget{}class i extends Event{detail=null;constructor(e,t){let n=null;t&&t.detail&&(n=t.detail,delete t.detail),super(e,t),this.detail=n}}class o extends i{module=null;constructor(e,t,n){e&&e.id?super(e.id+"."+t,n):(l.error("Send ModuleEvent with empty module:",e),super("NoModuleEvent",n),this.eventName=t),this.module=e}}class a extends o{constructor(e,t){super(a.coreContext,e,t)}}const r={init:e=>{a.coreContext=e,e.event=new e.EventManager}};e.exports={EventManager:s,GlobalEvent:i,ModuleEvent:o,CoreEvent:a,unitSignals:r}},453:(e,t,n)=>{const{getValue:l}=n(134),s=n(354);const i={init:e=>{e.i18n=new e.Translator},load:e=>{e.i18n.mutate(s),e.i18n.mutateUpdate()}};e.exports={Translator:class{languareData=null;languareCurrent=null;languareMutations=null;constructor(e){var t;this.languareData={},this.languareMutations={},this.languareCurrent=e||((t=l("navigator"))?t.language:null)||"default"}import(e){let t=null,n=null;for(let l in e){for(t=!0,n=e[l];t;){t=!1;for(let e in n)if("string"==typeof n[e]||"number"==typeof n[e])n[e.toLocaleLowerCase()]=n[e],delete n[e];else if("object"==typeof n[e]&&null!==n[e]){t=!0;for(let t in n[e])n[e.toLocaleLowerCase()+"."+t.toLocaleLowerCase()]=n[e][t],delete n[e][t]}}this.languareData[l]=this.languareData[l]||{},Object.assign(this.languareData[l],n)}}mutate(e){Object.assign(this.languareMutations,e),this.languare=this.languare}mutateUpdate(e){for(e=e||this.languareCurrent;e in this.languareMutations;)e=this.languareMutations[e];this.languareCurrent=e}get languare(){return this.languareCurrent}set languare(e){this.mutateUpdate(e)}get(e){return this.languareData[this.languareCurrent]=this.languareData[this.languareCurrent]||{},this.languareData[this.languareCurrent][e]||null}set(e,t){this.languareData[this.languareCurrent]=this.languareData[this.languareCurrent]||{},this.languareData[this.languareCurrent][e]=t}},unitSignals:i}},38:(e,t,n)=>{const{projectName:l}=n(185),{styleLoggerProject:s,styleLoggerModule:i}=n(522),{consoleContext:o}=n(134);const a={init:e=>{e.logger=new e.LoggerBrowser(l,null,s)},event:e=>{e.event.addEventListener(e.ModuleImportEvent.eventType,(t=>{let n=t.module||null;n&&(n.logger=new e.LoggerBrowser(n.id,e.logger,i))}))}};e.exports={LoggerBrowser:class{outData=null;console=null;outStyle=null;constructor(e,t,n){this.outData=e||null,this.console=t||o||null,this.outStyle=n||null;let l={};Object.getOwnPropertyNames(this.console).filter((e=>"function"==typeof this.console[e]),this).map((e=>{let t=l[e]={writable:!1};-1!=["log","info","warn","error"].indexOf(e)?t.value=((...t)=>{let n=t;this.outData&&n.length&&(n="string"==typeof n[0]?["%c["+this.outData+"]%c "+n[0],this.outStyle,null].concat(n.slice(1)):["%c["+this.outData+"]%c",this.outStyle,null].concat(n)),this.console[e].apply(this.console,n)}).bind(this):t.value=((...t)=>{this.console[e].apply(this.console,t)}).bind(this)}),this),Object.defineProperties(this,l)}},unitSignals:a}},267:(e,t,n)=>{const{connectContext:l,globalContext:s}=n(134),{Module:i}=n(305),{moduleListenerName:o}=n(312),{GlobalEvent:a,CoreEvent:r}=n(334);class u extends r{recv=null;recvPrevious=null;constructor(e,t){super("ModuleListener.recv",{cancelable:!0}),this.recv=e||null,this.recvPrevious=t||null}}u.eventType="core.ModuleListener.recv";class c extends r{module=null;recvPrevious=null;constructor(e,t){super("ModuleListener.recvModule",{cancelable:!0}),this.module=e||null,this.recvPrevious=t||null}}c.eventType="core.ModuleListener.recvModule";class d extends r{moduleTemplate=null;recvPrevious=null;constructor(e,t){super("ModuleListener.recvModuleTemplate",{cancelable:!0}),this.moduleTemplate=e||null,this.recvPrevious=t||null}}d.eventType="core.ModuleListener.recvModuleTemplate";class g extends r{data=null;recvPrevious=null;constructor(e,t){super("ModuleListener.recvData",{cancelable:!0}),this.data=e||null,this.recvPrevious=t||null}}g.eventType="core.ModuleListener.recvData";class h extends r{module=null;recvPrevious=null;constructor(e,t){super("ModuleListener.processModule",{cancelable:!0}),this.module=e||null,this.recvPrevious=t||null}}h.eventType="core.ModuleListener.processModule";class p extends a{constructor(e,t){super(e+"ModuleRequest",{cancelable:!0}),this.registerCallback=t}}class m extends r{module=null;constructor(e){super("moduleImport",{cancelable:!0}),this.module=e}}m.eventType="core.moduleImport";class v extends r{module=null;constructor(e){super("signalModuleImport",{cancelable:!0}),this.module=e}}v.eventType="core.signalModuleImport";class b extends EventTarget{coreContext=null;constructor(e){super(),this.coreContext=e}listenStart(){}listenStop(){}onRecvDefault(e,t){e&&(e.__isModuleTemplate||"ModuleTemplate"==e.__dataType?this.dispatchEvent(new d(e,t))&&this.onRecvModuleTemplateDefault(e,t):e.__isModule||"Module"==e.__dataType?this.dispatchEvent(new c(e,t))&&this.onRecvModuleDefault(e,t):this.dispatchEvent(new g(e,t))&&this.onRecvDataDefault(e,t))}onRecvModuleTemplateDefault(e,t){if(!e.id)return;let n=new i(e.id);Object.defineProperty(n,"__isModule",{writable:!1,value:!0}),Object.defineProperty(n,"__dataType",{writable:!1,value:"Module"}),e.constructors&&e.constructors instanceof Array&&e.constructors.filter((e=>"function"==typeof e)).map((e=>e.call(n,n,this.coreContext))),this.dispatchEvent(new h(n,t))}onRecvModuleDefault(e,t){this.dispatchEvent(new h(e,t))}onRecvDataDefault(e,t){}}class f extends b{globalObject=null;listenerName=null;listenerCallback=null;constructor(e,t,n){super(e),this.globalObject=t||null,this.listenerName=n||null,this.listenerCallback=null}listenStart(e){this.listenerCallback||(e=e||{},this.globalObject.addEventListener(this.listenerName,this.listenerCallback=e=>{"status"in e&&(e.status=!0);let t=e.moduleTemplate||e.transferObject||null;t?this.dispatchEvent(new u(t,!1))&&this.onRecvDefault(t,!1):e.preventDefault()}),this.globalObject.dispatchEvent(new p(this.listenerName,(e=>{this.dispatchEvent(new u(e,!0))&&this.onRecvDefault(e,!0)}).bind(this))))}listenStop(){this.listenerCallback&&(this.globalObject.removeEventListener(this.listenerName,this.listenerCallback),this.listenerCallback=null)}}class M extends b{globalObject=null;listenerName=null;constructor(e,t,n){super(e),this.globalObject=t||null,this.listenerName=n||null}listenStart(e){if(e=e||{},this.globalObject[this.listenerName]){if(!(this.globalObject[this.listenerName]instanceof Array))return;this.globalObject[this.listenerName].map((e=>{this.dispatchEvent(new u(e,!0))&&this.onRecvDefault(e,!0)}),this),this.globalObject[this.listenerName]=null,delete this.globalObject[this.listenerName]}Object.defineProperty(this.globalObject,this.listenerName,{enumerable:!1,configurable:!e.permanent,writable:!1,value:(e=>{this.dispatchEvent(new u(e,!1))&&this.onRecvDefault(e,!1)}).bind(this)})}listenStop(){return delete this.globalObject[this.listenerName]}}b.getModuleListener=(e,t)=>l instanceof EventTarget?new f(e,l,t):new M(e,l,t);const x={init:e=>{e.moduleListener=e.ModuleListener.getModuleListener(e,o)},event:e=>{e.moduleListener.addEventListener(e.ListenerProcessModuleEvent.eventType,(async t=>{let n=t.module||null;if(n&&e.event.dispatchEvent(new e.ModuleImportEvent(n))&&(e.modules.installModule(n),e.event.dispatchEvent(new e.ProcessModuleImportEvent(n))))for(var l=0;l<e.modules.signals.signalAutoloadList.length;l++)await Promise.all(n.signals.signal(e.modules.signals.signalAutoloadList[l],e))}))},applicationPrev:e=>{e.moduleListener.listenStart()}};e.exports={ModuleListener:b,ContextModuleListener:M,EventModuleListener:f,ListenerRecvEvent:u,ListenerRecvModuleEvent:c,ListenerRecvModuleTemplateEvent:d,ListenerRecvDataEvent:g,ListenerProcessModuleEvent:h,ListenerModuleRequestEvent:p,ModuleImportEvent:m,ProcessModuleImportEvent:v,unitSignals:x}},305:e=>{class t extends Error{moduleId=null;moduleManager=null;constructor(e,t){super('Module "'+e.toString()+'" not found in ModuleManager'),this.moduleId=e||null,this.moduleManager=t||null}}class n{signals=null;moduleContext=null;constructor(e){this.signals={},this.moduleContext=e}register(e){if(e.unitSignals){for(let t in e.unitSignals)this.signals[t]=this.signals[t]||[],e.unitSignals[t]instanceof Array?this.signals[t]=this.signals[t].concat(e.unitSignals[t].filter((e=>e)).filter((e=>"function"==typeof e))):"function"==typeof e.unitSignals[t]&&this.signals[t].push(e.unitSignals[t]);delete e.unitSignals}Object.assign(this.moduleContext,e)}signal(e,...t){if(!(e in this.signals))return[];const n=this.signals[e].filter((e=>"function"==typeof e)).map((e=>e.call(this.moduleContext,this.moduleContext,...t))).filter((e=>e instanceof Promise));return delete this.signals[e],n}destroy(){this.signals={}}}class l{signals=null;moduleContext=null;constructor(e){this.signals={},this.moduleContext=e}register(e,...t){this.signals[e]=this.signals[e]||[],this.signals[e]=this.signals[e].concat(t.filter((e=>e)).filter((e=>"function"==typeof e)))}signal(e,...t){if(!(e in this.signals))return[];const n=this.signals[e].filter((e=>"function"==typeof e)).map((e=>e.call(this.moduleContext,this.moduleContext,...t))).filter((e=>e instanceof Promise));return delete this.signals[e],n}destroy(){this.signals={}}}class s{coreContext=null;moduleManager=null;signalAutoloadList=null;constructor(e,t){this.coreContext=e,this.moduleManager=t,this.signalAutoloadList=[]}signal(e,...t){let n=[];for(const l in this.moduleManager.modules)n=n.concat(this.moduleManager.modules[l].signals.signal(e,...t));return n}async signalModulesLoad(){await Promise.all(this.callModuleSignal("event")),await Promise.all(this.callModuleSignal("load")),await Promise.all(this.callModuleSignal("launch")),await Promise.all(this.callModuleSignal(["application","app","run"]))}callModuleSignal(e){"string"==typeof e&&(e=[e]),this.signalAutoloadList=this.signalAutoloadList.concat(e);let t=[];return e.map((e=>{t=t.concat(this.signal(e,this.coreContext))}),this),e.map((e=>{this.coreContext.event.dispatchEvent(new this.coreContext.CoreEvent("modules.globalTarget."+e))}),this),t}}e.exports={ModuleNotFoundError:t,UnitSignalManager:n,ModuleSignalManager:l,ModuleManagerSignalManager:s,Module:class{id=null;require=null;loaded=null;info=null;exports=null;events=null;units=null;signals=null;constructor(e,t){t=t||{},this.id=e||null,this.require=t.require||(e=>{e.exports=e}),this.loaded=t.loaded||!1,this.info=t.info||{},this.exports={},this.events=new EventTarget,this.units=new n(this),this.signals=new l(this)}},ModuleManager:class{modules=null;state=null;signals=null;coreContext=null;constructor(e){this.modules={},this.state={},this.coreContext=e,this.signals=new s(e,this),this.require=(e=>{if(!(e in this.modules))throw new t(e,this);return this.modules[e].loaded||(this.modules[e].exports={},this.modules[e].require&&this.modules[e].require.call(this.modules[e].exports,this.modules[e],this.modules[e].exports,this.require),this.modules[e].loaded=!0),this.modules[e].exports}).bind(this),this.coreContext&&this.installModule(this.coreContext)}installModule(e,t){this.modules[e.id]=e,Object.defineProperty(this,e.id,{writable:!1,value:e}),Object.defineProperty(e,"moduleManager",{writable:!1,value:this}),t&&this.require(e.id)}},unitSignals:{init:e=>{e.modules=new e.ModuleManager(e)},load:e=>{e.modules.signals.signalAutoloadList.push("init")}}}},134:e=>{const t=()=>{try{return globalContext}catch(e){}return globalThis},n=()=>{try{return packageContext}catch(e){}return{}},l=()=>{try{return runtimeContext}catch(e){}return{}},s=e=>{try{return debugContext}catch(e){}return e?t():{}},i=()=>{try{return domContext}catch(e){}return t()},o=e=>{const s=l();if(e in s)return s[e];const i=n();if(e in i)return i[e];const o=t();return e in o?o[e]:e in globalThis?globalThis[e]:void 0};e.exports={forceDebugContext:s(!0),debugContext:s(!1),runtimeContext:l(),packageContext:n(),connectContext:(()=>{try{return connectContext}catch(e){}return t()})(),domContext:i(),globalContext:t(),consoleContext:o("console"),getDocument:()=>i().document,getValue:o,getInterpreterType:()=>globalThis.constructor&&globalThis.constructor.name&&"window"==globalThis.constructor.name.toLowerCase()||globalThis instanceof EventTarget||globalThis.navigator&&globalThis.navigator.userAgent||globalThis.navigator&&globalThis.navigator.cookieEnabled?"Browser":globalThis.performance&&globalThis.performance.nodeTiming?"NodeJS":"Unknown"}},262:function(e,t,n){const{connectContext:l}=n(134),{moduleListenerName:s}=n(312);class i extends Event{status=null;transferObject=null;constructor(e){super(e),this.status=!1,this.transferObject=null}}class o extends i{moduleTemplate=null;constructor(e,t){super(e),this.transferObject=this.moduleTemplate=t}}const a=(e,t,n)=>{e instanceof EventTarget?((e,t,n)=>{let l=new o(t,n);e.dispatchEvent(l);let s=l=>{let i=l.registerCallback||null;i&&"function"==typeof i&&(e.removeEventListener(t+"ModuleRequest",s),i(n))};l.status||e.addEventListener(t+"ModuleRequest",s)})(e,t,n):((e,t,n)=>{e[t]=e[t]||[],e[t]instanceof Array?e[t].push(n):e[t](n)})(e,t,n)};e.exports={moduleCreate:(e,...t)=>{let n={id:e,constructors:t,send:()=>(a(l,s,n),this)};return Object.defineProperty(n,"__dataType",{writable:!1,value:"ModuleTemplate"}),Object.defineProperty(n,"__isModuleTemplate",{writable:!1,value:!0}),n},defaultModuleCreateSignals:(e,t)=>{e.units.signal("init",t),e.units.signal("event",t),e.units.signal("load",t),e.units.signal("launch",t),e.units.signal("application",t),e.signals.register("init",(async(e,t)=>await Promise.all(e.units.signal("moduleInit",t)))),e.signals.register("event",(async(e,t)=>await Promise.all(e.units.signal("moduleEvent",t)))),e.signals.register("load",(async(e,t)=>await Promise.all(e.units.signal("moduleLoad",t)))),e.signals.register("launch",(async(e,t)=>await Promise.all(e.units.signal("moduleLaunch",t)))),e.signals.register("application",(async(e,t)=>await Promise.all(e.units.signal("moduleApplication",t))))}}},354:e=>{"use strict";e.exports=JSON.parse('{"ru":"ru-RU","en":"en-US","default":"ru"}')}},t={};(function n(l){var s=t[l];if(void 0!==s)return s.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,n),i.exports})(725)})();
})({},{});